import{w as p,o as y,s as F,a as m,c as d,i as L,m as x,z as N,b as u,t as g,d as P,e as _,r as w,j as C,f as S,g as h,u as D,F as U,h as E}from"./vendor.18b774ba.js";const A=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}};A();const B=[{name:"Speaker",colour:"#DDDDDD",abbr:["Spk","SPK","Speaker Seeking Re-Election"],fullname:"Speaker"},{name:"Respect Party",colour:"#46801C",abbr:["Respect","RESPECT"],fullname:"Respect Party"},{name:"Democratic Unionist Party",colour:"#D46A4C",abbr:["DUP","dup"],fullname:"Democratic Unionist Party"},{name:"Christian Peoples Alliance",colour:"#813887",abbr:["CPA","cpa"],fullname:"Christian Peoples Alliance"},{name:"National Front",colour:"midnightblue",abbr:["NF","nf"],fullname:"National Front"},{name:"Sinn Fein",colour:"#326760",abbr:["SF","sf"],fullname:"Sinn Fein"},{name:"Ulster Conservatives and Unionists - New Force",colour:"#9999FF",abbr:["UCF-NF"],fullname:"Ulster Conservatives and Unionists - New Force"},{name:"Alliance",colour:"#F6CB2F",abbr:["All","ALL"],fullname:"Alliance"},{name:"Social Democratic & Labour Party",colour:"#3A9E84",abbr:["SDLP"],fullname:"Social Democratic & Labour Party"},{name:"Soc Lab",colour:"#EE1C25",abbr:["Soc Lab"],fullname:"Socialist Labour"},{name:"Lab Co-op",colour:"#DC241f",abbr:["Lab Co-op"],fullname:"Labour Co-operative"},{name:"Monster Raving Loony Party",colour:"#FFF000",abbr:["MRLP"],fullname:"Official Monster Raving Loony Party"},{name:"Trade Unionist and Socialist Coalition",colour:"#EC008C",abbr:["TUSC"],fullname:"Trade Unionist and Socialist Coalition"},{name:"Plaid Cymru",colour:"#008142",abbr:["PC"],fullname:"Plaid Cymru"},{name:"Scottish National Party",colour:"#FDF38E",abbr:["SNP"],fullname:"Scottish National Party"},{name:"Christian Party",colour:"#9966CC",abbr:"Christian",fullname:"Christian Party"},{name:"English Democrats",colour:"#915F6D",abbr:["ED"],fullname:"English Democrats"},{name:"Independent",colour:"#DDDDDD",abbr:["Ind","No Description"],fullname:"Independent"},{name:"Green Party",colour:"#6AB023",abbr:["Green"],fullname:"Green Party"},{name:"British National Party",colour:"#2e3b74",abbr:["BNP"],fullname:"British National Party"},{name:"United Kingdom Independence Party",colour:"#70147A",abbr:["UKIP"],fullname:"UK Independence Party"},{name:"Labour Party",colour:"#DC241f",abbr:["Lab"],fullname:"Labour"},{name:"Conservative Party",colour:"#0087DC",abbr:["Con"],fullname:"Conservative"},{name:"Liberal Democrat",colour:"#FAA61A",abbr:["LD"],fullname:"Liberal Democrat"},{name:"Ulster Unionist Party",colour:"#48A5EE",abbr:["UUP"],fullname:"Ulster Unionist Party"},{name:"Brexit Party",colour:"#12B6CF",abbr:["Brexit","RefUK"],fullname:"Reform UK"}];var O={parties:B};const R={class:"w-full h-full rounded-lg shadow-lg bg-slate-300"},k={props:{mapType:String,dataSource:Object,displayType:String},emits:["changeFocus"],setup(c,{emit:a}){const o=c;var r,e;const t=600,l=700;function f(n){for(let s of O.parties)if(s.name==n||s.fullname==n||s.abbr.includes(n)||s.abbr.includes(n.toLowerCase()))return s.colour;return"#616161"}function b(){let n=o.dataSource.boundary.value;if(console.log("boundary",n),n==null||n=={}||n.features==null||n.features.length==0)return;let s=L().projection(x().fitExtent([[0,0],[l,t]],n));r.attr("viewBox",[[0,0],[l,t]]),r.call(N().on("zoom",i=>{e.attr("transform",i.transform)}).scaleExtent([1,8]).translateExtent([[0,0],[l,t]])),e.attr("transform","translate(0 0) scale(1)"),e.selectAll("path").data(n.features).enter().append("path").attr("d",s).attr("data-tag",i=>i.properties.PCON20CD).attr("fill","red").on("mouseover",i=>{a("changeFocus",i.target.getAttribute("data-tag"))})}function v(){let n=o.dataSource.election.value;e.selectAll("path").attr("fill",s=>{let i=n[s.properties.PCON20CD].mp.party;return f(i)})}return p(o.dataSource.boundary,()=>{console.log("Src Boundaries changed ",o.dataSource.boundary.value),b()}),p(o.dataSource.election,()=>{console.log("Src Election changed ",o.dataSource.election.value),v()}),y(async()=>{console.log("Mounted with ",o.dataSource.boundary.value),r=F("div svg").attr("viewBox",[[0,0],[l,t]]),e=r.append("g"),b(),v()}),(n,s)=>(m(),d("div",R,[(m(),d("svg",{ref_key:"map",ref:r},null,512))]))}},j={class:"w-full bg-slate-300 rounded-lg shadow-lg p-4"},T={class:"inline-block font-bold text-xl"},$={class:"inline-block font-bold text-sm pl-2"},M={class:"font-mono text-sm block"},I={props:{result:Object},setup(c){const a=c;return y(()=>{console.log(a.result)}),p(a.result,()=>{console.log("New result ",a.result)}),(o,r)=>(m(),d("div",j,[u("h1",T,g(a.result.name||""),1),u("h5",$,"["+g(a.result.id||"")+"]",1),u("span",M,g(JSON.stringify(a.result)),1)]))}};var K=(c,a)=>{const o=c.__vccOpts||c;for(const[r,e]of a)o[r]=e;return o};const G={},z={class:"m-4 mb-0 p-2 text-gradient text-transparent bg-clip-text w-min pointer-events-none select-none"},V=u("h3",{class:"font-mono font-bold text-3xl"},"jamesm2w/",-1),W=u("h1",{class:"font-mono font-semibold text-5xl"},[P(" Election "),u("br"),P("Results ")],-1),q=[V,W];function J(c,a){return m(),d("div",z,q)}var H=K(G,[["render",J]]);const Q={setup(c){let a=_({value:{}}),o=_({value:{}}),r=w({focusOn:""});function e(f){r.focusOn=f,console.log(l.value)}y(async()=>{a.value=await C("./WestminsterConst.geojson"),o.value=await C("./2019.json")});const t=S(()=>({boundary:a,election:o})),l=S(()=>t.value.election.value[r.focusOn]||{});return(f,b)=>(m(),d(U,null,[u("div",null,[h(H),h(I,{result:D(l)},null,8,["result"])]),h(k,{dataSource:D(t),mapType:"real",displayType:"majority",onChangeFocus:e},null,8,["dataSource"])],64))}};E(Q).mount("#app");
